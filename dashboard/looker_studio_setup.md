# Looker Studio 대시보드 구축 가이드

## 1. 준비 단계

### BigQuery 뷰 생성
먼저 `looker_studio_views.sql`의 뷰들을 BigQuery에서 실행해야 합니다.

```bash
# Google Cloud SDK 인증 확인
gcloud auth list

# BigQuery에서 뷰 생성 (Google Cloud Console 또는 CLI 사용)
bq query --use_legacy_sql=false < looker_studio_views.sql
```

### 권한 설정
Looker Studio가 BigQuery에 접근할 수 있도록 권한을 확인합니다:
- BigQuery Data Viewer 역할
- BigQuery Job User 역할

## 2. Looker Studio 연결

### 데이터 소스 연결
1. [Looker Studio](https://lookerstudio.google.com) 접속
2. "만들기" → "데이터 소스" 선택
3. "BigQuery" 커넥터 선택
4. 프로젝트: `riot-data-pipeline`
5. 데이터셋: `riot_analytics`
6. 테이블: 생성한 뷰들 선택

### 추천 데이터 소스 구성
각 뷰별로 별도의 데이터 소스를 만드는 것을 권장:
- `challenger_dashboard` - 챌린저 랭킹용
- `match_analysis` - 매치 분석용  
- `player_performance` - 플레이어 성과용
- `champion_stats` - 챔피언 통계용
- `position_stats` - 포지션 분석용
- `time_analysis` - 시간대 분석용
- `kpi_summary` - 종합 KPI용

## 3. 대시보드 구성 제안

### 페이지 1: 종합 Overview
**주요 지표 카드:**
- 총 챌린저 수
- 총 매치 수
- 평균 게임 시간
- 최근 데이터 수집 시간

**차트:**
- 일별 게임 수 (라인 차트)
- 시간대별 게임 활동 (히트맵)
- 요일별 게임 분포 (바 차트)

### 페이지 2: 챌린저 랭킹
**차트:**
- 챌린저 LP 분포 (히스토그램)
- 승률 vs LP 상관관계 (산점도)
- 상위 20명 챌린저 테이블
- 베테랑/핫스트릭 비율 (도넛 차트)

**필터:**
- 날짜 범위
- LP 범위
- 베테랑 여부

### 페이지 3: 챔피언 메타
**차트:**
- 챔피언 픽률 상위 20 (바 차트)
- 챔피언 승률 상위 20 (바 차트)
- 챔피언별 평균 KDA (산점도)
- 챔피언별 게임 수 vs 승률 (버블 차트)

**필터:**
- 최소 게임 수
- 포지션
- 날짜 범위

### 페이지 4: 포지션 분석
**차트:**
- 포지션별 평균 통계 비교 (레이더 차트)
- 포지션별 KDA 분포 (박스플롯)
- 포지션별 승률 (바 차트)
- 포지션별 인기 챔피언 (테이블)

### 페이지 5: 게임 패턴 분석
**차트:**
- 게임 길이 분포 (히스토그램)
- 게임 모드별 통계 (파이 차트)
- 시간대별 평균 게임 길이 (라인 차트)
- 요일별 게임 패턴 (히트맵)

## 4. 차트 설정 가이드

### 색상 테마
Riot Games 브랜딩에 맞춰:
- Primary: #0F2027 (어두운 블루)
- Secondary: #C89B3C (골드)
- Accent: #463714 (브론즈)
- Success: #0596AA (청록)
- Warning: #F0E6D2 (크림)

### 주요 측정항목 설정

#### KDA 계산
```sql
(kills + assists) / GREATEST(deaths, 1)
```

#### 승률 계산
```sql
wins / (wins + losses) * 100
```

#### 분당 지표
```sql
stat_value / (game_duration / 60.0)
```

### 필터 설정
모든 페이지에 공통 필터:
- 날짜 범위 (기본: 최근 30일)
- 게임 모드
- 큐 타입

## 5. 성능 최적화

### 데이터 새로고침 설정
- 자동 새로고침: 1시간마다
- 캐시 설정: 12시간

### 쿼리 최적화
- 날짜 필터 활용 (파티셔닝 테이블)
- 필요한 컬럼만 선택
- 집계 함수 활용

## 6. 모바일 최적화

### 반응형 레이아웃
- 모바일에서 중요한 지표 우선 배치
- 차트 크기 자동 조정
- 간단한 필터 구성

### 성능 고려사항
- 모바일에서 복잡한 차트 제한
- 테이블 행 수 제한 (최대 100행)
- 실시간 업데이트 비활성화

## 7. 공유 및 권한

### 보고서 공유
```
공개 링크: 제한된 접근
조직 내 공유: 편집 권한 분리
```

### 권한 레벨
- 소유자: 전체 편집 권한
- 편집자: 차트 수정 권한  
- 뷰어: 조회 권한만

## 8. 모니터링 및 알림

### 데이터 품질 모니터링
- 데이터 수집 지연 알림
- 비정상적인 값 감지
- 쿼리 실패 알림

### 성능 모니터링
- 차트 로딩 시간 추적
- 사용자 활동 분석
- 오류 로그 모니터링

## 9. 문제 해결

### 일반적인 문제
**데이터가 표시되지 않음:**
- BigQuery 뷰 생성 확인
- 권한 설정 확인
- 날짜 필터 범위 확인

**성능이 느림:**
- 쿼리 복잡도 검토
- 캐시 설정 확인
- 데이터 범위 제한

**차트가 깨짐:**
- 데이터 타입 확인
- NULL 값 처리 확인
- 집계 함수 검토

## 10. 향후 확장

### 추가 기능
- 실시간 데이터 스트리밍
- ML 예측 모델 통합
- 사용자 지정 알림
- API 연동 자동화

### 데이터 확장
- 다른 서버 데이터 추가
- 과거 데이터 백필
- 외부 데이터 소스 연동